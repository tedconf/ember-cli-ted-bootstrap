$s-sprite-base-class: ".s";

$s-1x-sprites: sprite-map("ted_bootstrap/s-1x/*.png");
$s-2x-sprites: sprite-map("ted_bootstrap/s-2x/*.png");

#{$s-sprite-base-class} {
  @include inline-block;

  background: $s-1x-sprites no-repeat;

  overflow: hidden;
  text-indent: -9999em;
  zoom: 1;

  /* For Ye Aulde IE's */
  *font-size: 0;
  *line-height: 0;
  *text-indent: 0;
}

@mixin s-1x-sprite($name) {
  @extend #{$s-sprite-base-class};

  background-position: sprite-position($s-1x-sprites, $name);
  height: image-height(sprite-file($s-1x-sprites, $name));
  width: image-width(sprite-file($s-1x-sprites, $name));
}

@mixin s-2x-sprite($name) {
  background: $s-2x-sprites no-repeat;
  background-position: 0 round(nth(sprite-position($s-2x-sprites, $name), 2) / 2);
  background-size:
    sprite-width($s-2x-sprites) / 2
    sprite-height($s-2x-sprites) / 2;
}

@mixin s-1x-sprites($sprite-names) {
  @each $sprite-name in $sprite-names {
    $full-sprite-name: "s-#{$sprite-name}";
    .#{$full-sprite-name} {
      @include s-1x-sprite($sprite-name);
    }
  }
}

@mixin s-2x-sprites($sprite-names) {
  @each $sprite-name in $sprite-names {
    $full-sprite-name: "s-#{$sprite-name}";
    .#{$full-sprite-name} {
      @include s-2x-sprite($sprite-name);
    }
  }
}

@include s-1x-sprites(sprite-names($s-1x-sprites));

@media only screen and (-webkit-min-device-pixel-ratio: 1.5),
    only screen and (min--moz-device-pixel-ratio: 1.5),
    only screen and (min-device-pixel-ratio: 1.5),
    only screen and (min-device-pixel-ratio: 2) {
  @include s-2x-sprites(sprite-names($s-2x-sprites));
}
